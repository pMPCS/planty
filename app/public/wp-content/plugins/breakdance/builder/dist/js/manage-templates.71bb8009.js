(()=>{"use strict";var e={45335:(e,t,a)=>{a.d(t,{Fg:()=>k,LX:()=>u,Qm:()=>T,Wh:()=>b,rn:()=>Z});var s=a(27361),n=a.n(s),o=a(85450),i=a(96628),l=(a(74959),a(88506),a(30902)),r=a(45974),d=(a(31381),a(23128)),c=a(65118),p=a(39664);function u(e,t=[]){const a=o.PK.element(e.data.type);if(a.settings&&a.settings.disableAI)return t;let s=[...t,...m(a.controls.contentSections,"content",e)];return e.children.forEach((e=>{s=u(e,s)})),s}function m(e,t,a,s=[]){const i=o.PK.element(a.data.type),l=s;return e.forEach((e=>{const s=`${t}.${e.slug}`;g(e)&&!h(e,t,a)&&l.push({nodeId:a.id,controlPath:s,nodeName:i.name,field:{description:_(e,s,a.data.type),label:e.label,value:n()(a.data.properties,s),type:e.options.type,locked:Z(a,s)}}),"repeater"!==e.options.type&&m(e.children,s,a,l)})),l}function h(e,t,a){const s=`${t}.${e.slug}`,o=n()(a.data.properties,s,"");return""===o||null===o||void 0===o}function g(e){return["text","richtext","repeater"].includes(e.options.type)}function _(e,t,a){const s=o.PK.element(a).name;if("repeater"===e.options.type){const t=e.children.filter(g).map((e=>e.slug)),a=t.join(", ");return`${s} - An array of objects with the following keys: ${a}.`}return t.endsWith("button.text")?`${s} - Button`:s===e.label?s:`${s} - ${e.label}`}function v(e){return e.data?.properties?.meta?.promptInfo}function b(e){const t=v(e)?.temperature;return void 0!==t?t:1}function y(e,t){const a=o.PK.element(e.data.type).name,s=v(e)?.lockedFields||[],n=(0,d.Z)(s);n.includes(t)||n.push(t),o.Hb.unthrottledPropertyChanged({elementId:e.id,path:"meta.promptInfo.lockedFields",meta:{snapshotLabel:`Locked field "${t}" for element "${a}"`},value:n})}function f(e,t){const a=o.PK.element(e.data.type).name,s=v(e)?.lockedFields||[],n=(0,d.Z)(s),i=n.indexOf(t);i>-1&&n.splice(i,1),o.Hb.unthrottledPropertyChanged({elementId:e.id,path:"meta.promptInfo.lockedFields",meta:{snapshotLabel:`Unlocked field "${t}" for element "${a}"`},value:n})}function k(e,t){Z(e,t)?f(e,t):y(e,t)}function Z(e,t){const a=v(e)?.lockedFields||[];return a.includes(t)}function T(e){const t="Failed to get a response from OpenAI API, please try again.",a=e.slice(1,-1).replace(/\\n/g,"").replace(/\\"/g,'"').trim(),s=(0,l.pipe)((0,c.Z)(a,i.Z4),(0,r.fold)((()=>null),(e=>e))),n=s?.error?.message||t;console.log(a),p.Z.log.errorMessage(n)}},76491:(e,t,a)=>{a.d(t,{I8:()=>_,Tk:()=>u,ho:()=>m,m3:()=>h,y8:()=>g});var s=a(45974),n=a(32521),o=a(98851),i=a(96628),l=a(65669),r=a(88506),d=a(30902),c=a(85450),p=a(69137);a(19528);async function u(e,t="json"){return(0,o.D)({action:"breakdance_ai_request_completion",friendlyName:"AI Assistant",dataToPost:{messages:(0,l.J)(e),format:t},decoder:n.Z_,resultKey:"data"})}async function m(e,t="json",a){await(0,o.D)({action:"breakdance_ai_persist_messages",friendlyName:"AI Assistant - Persist Messages",dataToPost:{messages:(0,l.J)(e),format:t,temperature:a},decoder:n.dt({status:n.i0("ok")})})}function h(){const e=window.Breakdance.restUrl+"/ai/stream-completion?_wpnonce="+window.Breakdance.restNonce;return new EventSource(e)}function g(e){const t=(0,d.pipe)(e,r.Z,(0,s.fold)((()=>{}),(e=>e))),a=t?.choices[0].delta.content;return null!==a&&void 0!==a?a:""}async function _(){const e=await(0,o.D)({action:"breakdance_ai_get_settings",decoder:i.YF,resultKey:"data",suppressErrorLogging:!0});return(0,d.pipe)(e,(0,s.fold)((()=>!1),(e=>(p.n.ignore((()=>{c.cr.setAiSettings(e),c.cr.markCurrentAiSettingsAsUntouched()})),!0))))}},74959:(e,t,a)=>{a.d(t,{wX:()=>s});a(65669);function s(e,t){const a=[{name:"Business Name",value:e.businessName??"Bizcorp"},{name:"Business Description",value:e.businessDescription??"Bizcorp provides products and services."},{name:"Section Description",value:t?.sectionDescription??""},{name:"Qualifiers",value:t?.qualifiers??e.qualifiers??""}];return a.reduce(((e,t)=>t.value?`${e}\n${t.name}: ${t.value}`:e),"")}new Intl.PluralRules("en",{type:"ordinal"})},96628:(e,t,a)=>{a.d(t,{YF:()=>i,Z4:()=>l});var s=a(32521);const n=s.r$({icon:s.Z_,name:s.Z_,prompt:s.Z_}),o=s.dt({businessName:s.G0([s.Z_,s.lB]),businessDescription:s.G0([s.Z_,s.lB]),qualifiers:s.G0([s.Z_,s.lB]),presets:s.IX(n)}),i=s.dt({isApiKeySet:s.O7,isStreamingEnabled:s.O7,locale:s.Z_,model:s.Z_,prompt:o}),l=(s.dt({id:s.Z_,alt_description:s.G0([s.Z_,s.lB]),description:s.G0([s.Z_,s.lB]),urls:s.r$({raw:s.Z_,full:s.Z_,regular:s.Z_,small:s.Z_,thumb:s.Z_})}),s.dt({error:s.r$({message:s.Z_,type:s.G0([s.Z_,s.lB]),param:s.G0([s.Z_,s.lB]),code:s.G0([s.Z_,s.pk])})}))},5502:(e,t,a)=>{function s(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)}a.d(t,{S:()=>s})},89028:(e,t,a)=>{a.d(t,{ij:()=>v,gR:()=>_,l9:()=>g});a(27361),a(31381),a(85450);var s=a(45974),n=a(30902),o=(a(9950),a(69137),a(23128),a(65118)),i=(a(65669),a(84274),a(565),a(12721)),l=a(31737),r=a(31549),d=a(75031),c=a(32521);const p=c.G0([d.NM,c.IX(d.NM)]),u=c.dt({controlSectionShapeHash:c.Z_,propertiesData:c.dt({propertiesData:c._4})}),m=c.r$({element:p,controlSectionPropertiesData:u});a(98949);new i.hF;async function h(e){const{secure:t,permission:a}=await(0,l.fn)();return e&&!window.safari?"event":t?null===a||"denied"===a.state?"localstorage":"clipboard":"localstorage"}async function g(e){try{await navigator.clipboard.writeText(e),console.debug("Writing to clipboard")}catch(t){(0,l._G)(e),console.debug("Fallback: Writing to clipboard")}(0,r.r)("breakdance_clipboard",e)}async function _(e){const t=e?.clipboardData?.getData("text"),a=await h(e);return console.debug(`Reading clipboard from ${a}`),"event"===a?t:"localstorage"===a?(0,r.z)("breakdance_clipboard"):await navigator.clipboard.readText()}async function v(e){const t=await _(e);if(!t)return null;const a=(0,o.Z)(t,m);return(0,n.pipe)(a,(0,s.fold)((()=>null),(e=>e??null)))}},31737:(e,t,a)=>{async function s(){try{return await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1})}catch(e){return null}}async function n(){const e=await s();return{secure:window.isSecureContext,permission:e}}function o(e){const t=document.createElement("textarea");let a;t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",t.classList.add("breakdance-offscreen-input"),document.body.appendChild(t),t.focus(),t.select();try{a=document.execCommand("copy")}catch(s){a=!1}return document.body.removeChild(t),a}a.d(t,{_G:()=>o,fn:()=>n})},98949:(e,t,a)=>{a(69137),a(9950),a(64940),a(565),a(31549)},87615:(e,t,a)=>{a.d(t,{db:()=>i,v_:()=>l});var s=a(98851),n=a(9665),o=(a(31381),a(85450),a(23128),a(9950),a(39664),a(65669));a(565);async function i(){return await(0,s.D)({action:"breakdance_load_blocks",resultKey:"blocks",decoder:n.G})}async function l(e){return await(0,s.D)({friendlyName:"Saving Global Block to WordPress",action:"breakdance_save_global_block",dataToPost:{...e,tree:(0,o.J)(e.tree)},decoder:n.H,resultKey:"block"})}},1073:(e,t,a)=>{a.d(t,{T:()=>p});var s=a(98851),n=(a(75031),a(30902)),o=a(45974),i=a(51168),l=a(64940),r=a(32521),d=a(65669),c=a(69137);async function p(){return(0,n.pipe)(await(0,s.D)({friendlyName:"Saving global settings to WordPress",action:"breakdance_save_global_settings",dataToPost:{globalSettings:(0,d.J)(l.cr.globalSettings)},decoder:r._4}),(0,o.fold)((e=>((0,i.UE)(e),!1)),(()=>(c.n.ignore((()=>l.cr.markCurrentGlobalSettingsAsUntouched())),!0))))}},18759:(e,t,a)=>{a.d(t,{ln:()=>i,v:()=>o,y3:()=>l});var s=a(64940),n=a(23128);function o(e,t){const a=(0,n.Z)(s.kD.panelState);a.accordionState.globalSettings={...a.accordionState.globalSettings,[e]:t},s.kD.setPanelState(a)}function i(e,t){const a=(0,n.Z)(s.kD.panelState);a.accordionState.dynamicDataFieldAttributes={...a.accordionState.dynamicDataFieldAttributes,[e]:t},s.kD.setPanelState(a)}function l(e){return s.kD.panelState?.accordionState?.dynamicDataFieldAttributes[e]}},37982:(e,t,a)=>{a.d(t,{Fr:()=>_,y8:()=>m});a(21516);var s=a(98851),n=a(3735),o=a(48973),i=a(51168),l=a(64940),r=a(65669),d=a(32521),c=a(95690),p=a(69137),u=a(39664);function m(e){return/^-?[.]+[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(e)}function h(e){try{document.createDocumentFragment().querySelector(e)}catch{return!1}return!0}function g(e){if("class"===e.type){if(!m(e.name))return void u.Z.log.message(`${e.name} is not a valid CSS class name.`)}else if(!h(e.name))return void u.Z.log.message(`${e.name} is not a valid CSS selector.`);l.cr.cssSelectors.find((t=>t.name===e.name))?u.Z.log.message(`${e.name} is already present.`):p.n.transaction((()=>l.cr.setSelectors([...l.cr.cssSelectors,e])),"Add Selector")}function _(e){g(e),(0,c.O_)("selectors")||v()}async function v(){return(0,n.zG)(await(0,s.D)({friendlyName:"Saving selectors to WordPress",action:"breakdance_save_selectors",dataToPost:{selectors:(0,r.J)(l.cr.cssSelectors)},decoder:d._4}),(0,o.g_)((e=>((0,i.UE)(e),!1)),(()=>(p.n.ignore((()=>l.cr.markCurrentSelectorsAsUntouched())),!0))))}},32127:(e,t,a)=>{a.d(t,{UH:()=>n});a(8400),a(98851),a(47245),a(85450),a(67505);var s=a(23128);a(69137),a(51168),a(25970),a(86592),a(13635),a(65669),a(89381),a(63842),a(39664),a(565),a(13503);function n(e){const t=new URL(window.Breakdance.originalUrl);return t.searchParams.set("id",`${e}`),t.search=t.searchParams.toString(),t.href}class o{setupHook(e){this.store=e,this.initialState=(0,s.Z)(this.store.state)}resetToInitialState(){const e=(0,s.Z)(this.initialState);this.store.replaceState(e)}}new o},92788:(e,t,a)=>{var s=a(20144),n=a(85450),o=a(49026),i=a(31096),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(i.Z,{staticClass:"breakdance-admin-wp"},[t("Notifications"),t("div",{staticClass:"manage-templates-app"},[e.isBlockPostType?[t("ManageGlobalBlocks")]:[t("ManageTemplates",{attrs:{postType:e.postType}})]],2)],1)},r=[],d=a(70655),c=a(14391),p=a(96326),u=a(37179),m=a(30144),h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isLoadingData?t("Loading"):e._e(),t("div",{staticClass:"manage-templates"},[t("div",{staticClass:"manage-templates__header"},[t("h1",{staticClass:"manage-templates__title"},[e._v(" "+e._s(e.showTrash?`Deleted ${e.templateName}s`:`${e.templateName}s`)+" ")]),e.showTrash?e._e():["breakdance_header"===e.postType||"breakdance_footer"===e.postType||"breakdance_popup"===e.postType?t(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(t){e.modalData={type:"add",data:e.blankTemplateWithValidSettings}}}},["breakdance_header"===e.postType?t("span",[e._v("Add Header")]):e._e(),"breakdance_footer"===e.postType?t("span",[e._v("Add Footer")]):e._e(),"breakdance_popup"===e.postType?t("span",[e._v("Add Popup")]):e._e()]):e._e(),"breakdance_template"===e.postType?t("AddTemplateDropdown",{attrs:{templateName:e.templateName,isWooCommerceActive:e.isWooCommerceActive,templates:e.templatesByStatus},on:{input:e.saveTemplate,blankModal:function(t){return e.handleTemplateCardModal("add",e.blankTemplateWithValidSettings)},modalWithSettings:function(t){return e.handleTemplateCardModal("add",t)}}}):e._e()]],2),this.templatesByStatus.length>0||this.filteredTemplatesBySearch.length>0||e.trashLength>0||e.showTrash?t("div",{staticClass:"manage-templates__actions"},[e.showTrash?e._e():t("div",{staticClass:"manage-templates__search"},[t("SearchInput",{attrs:{placeholder:e.searchInputPlaceholder},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("div",{staticClass:"manage-templates__secondary-actions"},[e.showTrash&&this.templatesByStatus.length?t(u.Z,{staticClass:"mr-4",attrs:{text:"",loading:e.emptyingTrash},on:{click:e.emptyTrash}},[t("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),e._v(" Empty Trash ")],1):e._e(),e.trashLength||e.showTrash?t(u.Z,{attrs:{text:""},on:{click:function(t){e.showTrash=!e.showTrash}}},[e.showTrash?[t("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),e._v(" Back ")]:[t("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),e._v(" Trash ("+e._s(e.trashLength)+") ")]],2):e._e()],1)]):e._e()]),t("EmptyState",{attrs:{value:e.emptyStateData}}),e.filteredTemplatesBySearch.length>0?t(m.Z,{staticClass:"manage-templates__table breakdance-table",class:e.newTemplateAdded?"added":""},[t("thead",[t("tr",[t("th",{attrs:{width:"35%"}},[e._v("Template")]),t("th",{attrs:{width:"25%"}},[e._v("Applies to")]),t("th",{attrs:{width:"15%"}},[e._v("Conditions")]),"breakdance_popup"===e.postType?t("th",{attrs:{width:"15%"}},[e._v("Triggers")]):e._e(),"breakdance_popup"!==e.postType?t("th",{attrs:{width:"15%"}},[e._v("Priority")]):e._e(),t("th",{attrs:{width:"10%"}},[e._v("Active")])])]),t("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"in-out"}},e._l(e.filteredTemplatesBySearch,(function(a){return t("TemplateRow",{key:a.id,class:e.newTemplateAdded?"":"animation-disabled",attrs:{value:e.getTemplateWithValidSettings(a),templateTypeCategories:e.templatesManagementData.templateTypeCategories,templateParents:e.templateParentsWithoutTrashed},on:{input:e.handleTemplateCardModal,update:e.updateTemplate,duplicate:e.duplicateTemplate,trash:e.trashTemplate,delete:e.deleteTemplate,restore:e.restoreTemplate}})})),1)],1):e._e(),e.modalData?t("EditTemplateModal",{attrs:{value:e.modalData.data,templatesManagementData:e.templatesManagementData,postType:e.postType,templateParents:e.templateParentsWithoutTrashed,templates:e.templatesByStatus,mode:e.modalData.type,skipWarning:e.skipWarning,hasPermissionToManageFallbacks:e.hasPermissionToManageFallbacks},on:{input:function(t){return e.saveTemplate(t)},close:function(t){e.modalData=!1},skipWarning:function(t){e.skipWarning=t}}}):e._e()],1)},g=[],_=a(30902),v=a(48262),b=a(45974),y=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("tr",[t("td",[t("div",{staticClass:"manage-templates__title-row"},["trash"===e.mode?t("span",{staticClass:"manage-templates__title-link"},[e._v(" "+e._s(e.value.title)+" "),t("span",{staticClass:"manage-templates__title-id"},[e._v("#"+e._s(e.value.id))])]):t("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:e.value.editInBreakdanceLink}},[e._v(" "+e._s(e.value.title)+" "),t("span",{staticClass:"manage-templates__title-id"},[e._v("#"+e._s(e.value.id))])])]),t("div",{staticClass:"manage-templates__row-actions"},["publish"===e.mode?t("a",{staticClass:"manage-templates__btn-action",attrs:{href:e.value.editInBreakdanceLink,target:"_top",title:"Edit in Breakdance"}},[e._v(" Edit in Breakdance ")]):e._e(),"publish"===e.mode?t("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Settings"},on:{click:e.openEditTemplateModal}},[e._v(" Settings ")]):e._e(),"trash"===e.mode?t("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:e.restoreTemplate}},[e._v(" Restore ")]):e._e(),"publish"===e.mode?t("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Duplicate"},on:{click:e.duplicateTemplate}},[e._v(" Duplicate ")]):e._e(),t("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===e.mode?"Trash":"Delete permanently"},on:{click:e.deleteTemplate}},[e._v(" "+e._s("publish"===e.mode?"Trash":"Delete permanently")+" ")])])]),t("td",{staticClass:"manage-template__applies-to"},[e.matchingQuickAddTemplate?[t("span",{staticClass:"d-block"},[e._v(e._s(e.matchingQuickAddTemplate.name))]),t("ElementBadge",{staticClass:"template-row-element-badge",attrs:{value:{backgroundColor:e.matchingQuickAddTemplate.backgroundColor,textColor:e.matchingQuickAddTemplate.textColor,label:e.matchingQuickAddTemplate.category}}})]:e.appliesToLabel?[e._v(e._s(e.appliesToLabel))]:e._e()],2),t("td",[e.value.settings.ruleGroups&&e.value.settings.ruleGroups.length?[t("ConditionsPreviewTooltip",{attrs:{value:e.value.settings.ruleGroups}})]:e._e()],2),"breakdance_popup"===e.value.postType?t("td",{staticClass:"manage-template__td_text"},[e._v(" "+e._s(e.triggerLabels(e.value.settings.triggers))+" ")]):e._e(),"breakdance_popup"!==e.value.postType?t("td",{staticClass:"manage-template__td_text"},[void 0!==e.value.settings.priority?[e._v(" "+e._s(e.value.settings.priority)+" ")]:e._e()],2):e._e(),t("td",{staticClass:"manage-template__td_text"},[[t("ToggleInput",{attrs:{value:!e.value.settings.disabled},on:{input:e.updateDisabled}})]],2)])},f=[],k=a(43432),Z=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[[t(k.Z,{staticClass:"condition-preview-tooltip-element",attrs:{bottom:"",transition:"0"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("span",e._g(e._b({},"span",s,!1),a),[t("Icon",{attrs:{icon:"CodeBranchIcon",size:"18"}})],1)]}}])},[t("span",[t("div",{staticClass:"condition-preview-tooltip-contanier"},[e._l(e.value,(function(a,s){return[t("div",{staticClass:"condition-preview-tooltip"},[s>0?t("span",{staticClass:"condition-preview-or-separator"},[t("span",[e._v("OR")])]):e._e(),e._l(a,(function(e,a){return t("ConditionPreviewRule",{key:a,attrs:{rule:e,index:a}})}))],2)]}))],2)])])]],2)},T=[],w=a(23128),C=a(27844),B=a(85283);let I=class extends s.ZP{edit(e){this.$emit("input",(0,w.Z)(e))}};(0,d.gn)([(0,c.fI)()],I.prototype,"value",void 0),I=(0,d.gn)([(0,c.wA)({components:{ConditionPreviewRule:C.Z,Icon:B.Z}})],I);const S=I,P=S;var G=a(1001),D=(0,G.Z)(P,Z,T,!1,null,null,null);const A=D.exports;var x=a(67132),$=a(46368);const L=[{name:"Single Product",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"product",ruleGroups:[],priority:20}},{name:"Shop Page & All Product Archives",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"all-product-archives",ruleGroups:[],priority:10}},{name:"Specific Product Archive",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"specific-product-archive",ruleGroups:[[{ruleSlug:"product-is-taxonomy",operand:"is",value:[]}]],priority:20},openDialog:!0},{name:"Single Post",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post",ruleGroups:[],priority:20}},{name:"Post Archive",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post-archives",ruleGroups:[],priority:10}},{name:"404 Not Found",category:"Other",textColor:$.Z.green800_light,backgroundColor:$.Z.green100_light,settings:{type:"404",ruleGroups:[]}},{name:"Search Results",textColor:$.Z.green800_light,backgroundColor:$.Z.green100_light,category:"Other",settings:{type:"search",ruleGroups:[]}}];var X=a(27517),M=a(66383);let W=class extends s.ZP{constructor(){super(...arguments),this.deleteInProgress=!1,this.restoreInProgress=!1}openEditTemplateModal(){"trash"!==this.mode&&this.$emit("input","edit",this.value)}get mode(){return this.value.status}get appliesToLabel(){const e=this.value.settings.type;let t="";return this.templateTypeCategories.some((a=>{const s=a.types.find((t=>t.slug===e));return!!s&&(t=s.label,!0)})),t}async deleteTemplate(){this.deleteInProgress=!0;const e=await(0,x.jZ)(this.value.title,this.value.id,this.value.status);e&&this.$emit("publish"===this.value.status?"trash":"delete",e),this.deleteInProgress=!1}async restoreTemplate(){this.restoreInProgress=!0;const e=await(0,x.ZU)(this.value.title,this.value.id);e&&this.$emit("restore",e),this.restoreInProgress=!1}duplicateTemplate(){const e=(0,w.Z)(this.value);e.title=`Copy of "${e.title}"`,e.settings.disabled=!0,this.$emit("duplicate",e)}get matchingQuickAddTemplate(){return L.find((e=>e.settings.type===this.value.settings.type))}triggerLabels(e){return e.map((e=>e.slug)).join(", ")}updateDisabled(e){const t=(0,w.Z)(this.value);t.settings.disabled=!e,this.$emit("update",t)}};(0,d.gn)([(0,c.fI)()],W.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],W.prototype,"templateTypeCategories",void 0),(0,d.gn)([(0,c.fI)()],W.prototype,"templateParents",void 0),W=(0,d.gn)([(0,c.wA)({components:{ToggleInput:M.Z,Icon:B.Z,ConditionsPreviewTooltip:A,ElementBadge:X.Z}})],W);const O=W,E=O;var N=(0,G.Z)(E,y,f,!1,null,null,null);const F=N.exports;var U=a(73385),V=a(70248),j=a(61908),R=a(11193),q=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("Dropdown",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(u.Z,e._g({staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:"",loading:e.quickAddInProgress}},a),[e._v(" Add Template ")])]}}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(U.Z,[t(V.Z,{attrs:{dense:"",width:"350"}},[e._l(e.quickAddTemplates,(function(a){return t(j.Z,{key:a.name,on:{click:function(t){return e.quickAdd(a)}}},[t(R.V9,{staticClass:"quick-add-item"},[e._v(" "+e._s(a.name)+" "),t("ElementBadge",{attrs:{value:{backgroundColor:a.backgroundColor,textColor:a.textColor,label:a.category}}})],1)],1)})),t(j.Z,{staticClass:"add-custom-template-wrapper"},[t(R.V9,{staticClass:"add-custom-template-wrapper-title"},[t(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{outlined:""},on:{click:function(t){return e.$emit("blankModal")}}},[e._v("Add Custom Template")])],1)],1)],2)],1)],1)],1)},z=[],H=a(90036),K=a(39664),Q=a(47187);let J=class extends s.ZP{constructor(){super(...arguments),this.open=!1,this.quickAddInProgress=!1}get quickAddTemplates(){return this.isWooCommerceActive?L:L.filter((e=>"woocommerce"!==e.category.toLowerCase()))}async quickAdd(e){const t={id:-1,title:e.name,editInBreakdanceLink:"",postType:"breakdance_template",settings:e.settings,status:"publish"};(0,Q.aA)(this.templates,e.settings,"template")&&(e.openDialog?this.$emit("modalWithSettings",t):(this.quickAddInProgress=!0,(0,_.pipe)(await(0,x.Qu)(t),(0,b.fold)((()=>{K.Z.log.message(`The new ${this.templateName} couldn't be saved`)}),(e=>{this.$emit("input",e)}))),this.quickAddInProgress=!1))}};(0,d.gn)([(0,c.fI)()],J.prototype,"templateName",void 0),(0,d.gn)([(0,c.fI)()],J.prototype,"isWooCommerceActive",void 0),(0,d.gn)([(0,c.fI)()],J.prototype,"templates",void 0),J=(0,d.gn)([(0,c.wA)({components:{Dropdown:H.Z,ElementBadge:X.Z}})],J);const Y=J,ee=Y;var te=(0,G.Z)(ee,q,z,!1,null,null,null);const ae=te.exports;var se=a(64940),ne=a(92517),oe=a(75051),ie=a(61033),le=function(){var e=this,t=e._self._c;e._self._setupProxy;return 0===e.value.itemsByStatus||0===e.value.filteredItemsBySearch?t("div",{staticClass:"manage-templates__empty"},["Header"==e.value.templateName?t("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[t("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM3.125 34.375h93.75",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):e._e(),"Footer"==e.value.templateName?t("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[t("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM96.875 65.625H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):e._e(),"Template"==e.value.templateName||"Unsupported template"==e.value.templateName||"Global Block"==e.value.templateName?t("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[t("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM50 3.125v93.75M50 34.375h46.875M96.875 65.625H50M50 50H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):0===e.value.itemsByStatus?t("div",[t("h4",[e._v(" You have no "+e._s(e.value.showTrash?"deleted":"published")+" "+e._s(e.value.templateName.toLowerCase())+"s. ")])]):0===e.value.filteredItemsBySearch?t("div",[t("h4",[e._v("No "+e._s(e.value.templateName.toLowerCase())+"s found.")])]):e._e()]):e._e()},re=[],de=a(82436);let ce=class extends s.ZP{get isBreakdanceDevelopmentEnvironment(){return(0,de.y)()}};(0,d.gn)([(0,c.fI)()],ce.prototype,"value",void 0),ce=(0,d.gn)([(0,c.wA)({})],ce);const pe=ce,ue=pe;var me=(0,G.Z)(ue,le,re,!1,null,null,null);const he=me.exports;var ge=a(16734),_e=a(90878);let ve=class extends s.ZP{constructor(){super(...arguments),this.modalData=!1,this.skipWarning=!1,this.templates=[],this.templatesManagementData={conditions:[],dynamicFields:[],templateTypeCategories:[],popupTriggers:null},this.isWooCommerceActive=!1,this.search="",this.showTrash=!1,this.newTemplateAdded=!1,this.hasPermissionToManageFallbacks=!1,this.emptyingTrash=!1,this.isLoadingData=!1,this.broadcastChannel=null}onTemplateAdded(){setTimeout((()=>this.newTemplateAdded=!1),1e3)}get templatesForUi(){return this.hasPermissionToManageFallbacks?this.templatesByStatus:this.templatesByStatus.filter((e=>!e.settings?.fallback))}get filteredTemplatesBySearch(){return this.search?this.templatesForUi.filter((e=>e.title.toLowerCase().includes(this.search.toLowerCase())||e.settings?.type?.includes(this.search.toLowerCase()))):this.templatesForUi}get templatesByStatus(){return this.templates.filter((e=>this.showTrash?"trash"===e.status:"publish"===e.status))}get blankTemplateWithValidSettings(){return{id:-1,title:"",postType:this.postType,editInBreakdanceLink:"",settings:{},status:"publish"}}get trashLength(){return this.templates.filter((e=>"trash"===e.status)).length}async duplicateTemplate(e){(0,_.pipe)(await(0,x.UB)(e),(0,b.fold)((()=>{K.Z.log.message(`Duplicating template "${e.id}" failed`)}),(e=>{this.saveTemplate(e)})))}async updateTemplate(e){(0,_.pipe)(await(0,x.Qu)(e),(0,b.fold)((()=>{K.Z.log.message(`Update for template "${e.id}" failed`)}),(e=>{this.templates=(0,Q.u7)(e,this.templates)})))}saveTemplate(e){this.templates=(0,Q.u7)(e,this.templates),this.newTemplateAdded=!0}deleteTemplate(e){this.templates=(0,Q.Xc)(e,this.templates)}trashTemplate(e){this.templates=(0,Q.Uu)(e,this.templates,"trash")}restoreTemplate(e){this.templates=(0,Q.Uu)(e,this.templates,"publish")}async emptyTrash(){this.emptyingTrash=!0,await(0,x.Dq)(this.postType)&&(this.templates=(0,Q.zU)(this.templates),this.showTrash=!1),this.emptyingTrash=!1}get templateParentsWithoutTrashed(){return this.templates.filter((e=>"trash"!==e.status)).map((e=>({text:e.title,value:e.id})))}get templateName(){return"breakdance_template"===this.postType?"Template":"breakdance_footer"===this.postType?"Footer":"breakdance_header"===this.postType?"Header":"breakdance_popup"===this.postType?"Popup":"Unsupported template"}get emptyStateData(){return{itemsByStatus:this.templatesByStatus.length,filteredItemsBySearch:this.filteredTemplatesBySearch.length,templateName:this.templateName,showTrash:this.showTrash}}get searchInputPlaceholder(){const e=this.templateName.toLowerCase();return`Search for ${e}s`}beforeMount(){this.broadcastChannel=(0,_e.a)()}async mounted(){ge.uq.register("b r e a k d a n c e",(()=>{this.hasPermissionToManageFallbacks=!this.hasPermissionToManageFallbacks})),this.isLoadingData=!0,(0,_.pipe)(await(0,x.rf)(this.postType),(0,b.fold)((()=>{K.Z.log.message("Couldn't load templates data")}),(e=>{this.templates=e.templates,this.templatesManagementData=e.templatesManagementData,this.isWooCommerceActive=e.isWooCommerceActive,se.PK.setDynamicFields(e.templatesManagementData.dynamicFields),se.PK.setConditions(e.templatesManagementData.conditions),se.PK.setEnvironment(e.environment)}))),this.isLoadingData=!1}beforeDestroy(){ge.uq.unbind("b r e a k d a n c e"),this.broadcastChannel&&this.broadcastChannel.close()}getTemplateWithValidSettings(e){return{...e,settings:(0,_.pipe)(e.settings,v.V4.decode,(0,b.fold)((()=>ye),(e=>e)))}}handleTemplateCardModal(e,t){this.modalData={type:e,data:t}}};(0,d.gn)([(0,c.fI)()],ve.prototype,"postType",void 0),(0,d.gn)([(0,c.RL)("newTemplateAdded")],ve.prototype,"onTemplateAdded",null),ve=(0,d.gn)([(0,c.wA)({components:{Icon:B.Z,SearchInput:ie.Z,Loading:oe.Z,Notifications:p.Z,EditTemplateModal:ne.Z,AddTemplateDropdown:ae,TemplateRow:F,EmptyState:he}})],ve);const be=ve,ye={type:"none",ruleGroups:[]},fe=be;var ke=(0,G.Z)(fe,h,g,!1,null,null,null);const Ze=ke.exports;var Te=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isLoadingData?t("Loading"):e._e(),t("div",{staticClass:"manage-templates"},[t("div",{staticClass:"manage-templates__header"},[t("h1",{staticClass:"manage-templates__title"},[e._v(" "+e._s(e.showTrash?"Deleted Global Blocks":"Global Blocks")+" ")]),e.showTrash?e._e():[t(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(t){e.modalData={type:"add",data:e.blankGlobalBlock}}}},[e._v(" Add Global Block ")])]],2),this.globalBlocksByStatus.length>0||this.filteredBlocksBySearch.length>0||e.trashLength>0||e.showTrash?t("div",{staticClass:"manage-templates__actions"},[t("div",{staticClass:"manage-templates__search"},[t("SearchInput",{attrs:{placeholder:"Search blocks"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.trashLength||e.showTrash?t("div",{staticClass:"manage-templates__secondary-actions"},[e.showTrash&&this.globalBlocksByStatus.length?t(u.Z,{attrs:{text:"",loading:e.emptyingTrash},on:{click:e.emptyTrash}},[t("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),e._v(" Empty Trash ")],1):e._e(),e.trashLength||e.showTrash?t(u.Z,{staticClass:"mr-2",attrs:{text:""},on:{click:function(t){e.showTrash=!e.showTrash}}},[e.showTrash?[t("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),e._v(" Back ")]:[t("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),e._v(" Trash ("+e._s(e.trashLength)+") ")]],2):e._e()],1):e._e()]):e._e()]),t("EmptyState",{attrs:{value:e.emptyStateData}}),e.filteredBlocksBySearch.length>0?t(m.Z,{staticClass:"manage-templates__table breakdance-table",class:e.newBlockAdded?"added":""},[t("thead",[t("tr",[t("th",[e._v("Template")]),t("th",[e._v("Shortcode")])])]),t("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"out-in"}},e._l(e.filteredBlocksBySearch,(function(a){return t("BlockRow",{key:a.id,class:e.newBlockAdded?"":"animation-disabled",attrs:{value:a},on:{input:function(t){e.modalData={type:"edit",data:t}},trash:e.trashBlock,delete:e.deleteBlock,restore:e.restoreBlock,save:e.saveBlockToWordPress}})})),1)],1):e._e(),e.modalData?t("EditGlobalBlockModal",{attrs:{value:e.modalData.data,mode:e.modalData.type,globalBlocks:e.globalBlocksByStatus},on:{input:function(t){return e.saveBlock(t)},close:function(t){e.modalData=!1}}}):e._e()],1)},we=[],Ce=a(75223),Be=a(24437),Ie=a(12570),Se=a(5294),Pe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ie.Z,{attrs:{value:!0,"max-width":"600",persistent:e.hasUnsavedChanges,scrollable:!0,transition:!1},on:{input:e.closeDialog}},[t(U.Z,{staticClass:"template-settings-modal-content",attrs:{tile:"",flat:"",width:"600"}},[t(Ce.EB,{staticClass:"edit-template-modal-titlebar"},[t("h1",[e._v(" "+e._s("add"===e.mode?"Add Global Block":`Editing "${e.internalValue.label}"`)+" ")])]),t(Ce.ZB,[t("div",{staticClass:"my-3"},[t("TextInput",{attrs:{value:e.internalValue.label,placeholder:"New Global Block",label:"Title",size:"md"},on:{input:e.setLabel}})],1)]),t(Ce.h7,{staticClass:"edit-template-modal-actions"},[t(Se.Z,[t(Be.Z,{staticClass:"text-left"},[e.hasUnsavedChanges?t(u.Z,{attrs:{text:""},on:{click:e.closeDialog}},[e._v(" Cancel ")]):e._e()],1),t(Be.Z,{staticClass:"text-right"},[t(u.Z,{attrs:{color:"blue",dark:"",elevation:"0",loading:e.saveInProgress},on:{click:e.saveGlobalBlock}},["edit"===e.mode?[e._v("Save")]:[e._v("Add Global Block")]],2)],1)],1)],1)],1)],1)},Ge=[],De=a(18446),Ae=a.n(De),xe=a(94655),$e=a(48727),Le=a(87589),Xe=a(46429),Me=a(7892),We=a(87615),Oe=a(89412);let Ee=class extends s.ZP{constructor(){super(...arguments),this.internalValue=(0,w.Z)(this.value),this.saveInProgress=!1}mounted(){(0,Oe.w)(),this.warnIfUnsavedFunction=(0,Me.$)((()=>this.hasUnsavedChanges))}setLabel(e){this.internalValue.label=e||""}get hasUnsavedChanges(){return!Ae()(this.internalValue,this.value)}closeDialog(){(0,Me.e)(this.warnIfUnsavedFunction),this.$emit("close")}async saveGlobalBlock(){this.internalValue.label?this.globalBlocks.find((e=>e.label===this.internalValue.label))?K.Z.log.message(`A global block with the title "${this.internalValue.label}" already exists. Please select another title.`):(0,_.pipe)(await(0,We.v_)(this.internalValue),(0,b.fold)((()=>{K.Z.log.message("Global block was not saved")}),(e=>{this.$emit("input",e),this.closeDialog()}))):K.Z.log.message("Title field can't be empty")}};(0,d.gn)([(0,c.fI)()],Ee.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],Ee.prototype,"mode",void 0),(0,d.gn)([(0,c.fI)()],Ee.prototype,"globalBlocks",void 0),Ee=(0,d.gn)([(0,c.wA)({components:{NumberInput:Xe.Z,TextInput:Le.Z,DropdownInput:$e.Z,ConditionsMatrix:xe.Z}})],Ee);const Ne=Ee,Fe=Ne;var Ue=(0,G.Z)(Fe,Pe,Ge,!1,null,null,null);const Ve=Ue.exports;var je=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("tr",[t("td",[t("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:e.value.editInBreakdanceLink}},[e._v(" "+e._s(e.value.label)+" "),t("span",{staticClass:"manage-templates__title-id"},[e._v("#"+e._s(e.value.id))])]),t("div",{staticClass:"manage-templates__row-actions"},["publish"===e.mode?t("a",{staticClass:"manage-templates__btn-action",attrs:{href:e.value.editInBreakdanceLink,target:"_top",title:"Edit in Breakdance"}},[e._v(" Edit in Breakdance ")]):e._e(),"publish"===e.mode?t("button",{staticClass:"manage-templates__btn-action",on:{click:e.openEditBlockModal}},[e._v(" Settings ")]):e._e(),"publish"===e.mode?t("button",{staticClass:"manage-templates__btn-action",on:{click:e.duplicateBlock}},[e._v(" Duplicate ")]):e._e(),"trash"===e.mode?t("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:e.restoreBlock}},[e._v(" Restore ")]):e._e(),t("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===e.mode?"Trash":"Delete permanently"},on:{click:e.deleteBlock}},[e._v(" "+e._s("publish"===e.mode?"Trash":"Delete permanently")+" ")])])]),t("td",[t("input",{staticClass:"block-shortcode",attrs:{type:"text"},domProps:{value:`[breakdance_block blockId=${e.value.id}]`},on:{click:e.highlightValue}})])])},Re=[];let qe=class extends s.ZP{constructor(){super(...arguments),this.deleteInProgress=!1,this.restoreInProgress=!1}openEditBlockModal(){this.$emit("input",this.value)}duplicateBlock(){const e=(0,w.Z)(this.value);e.id=-1,e.label=`Copy of "${e.label}"`,this.$emit("save",e)}async deleteBlock(){this.deleteInProgress=!0;const e=await(0,x.jZ)(this.value.label,this.value.id,this.value.status);e&&this.$emit("publish"===this.value.status?"trash":"delete",e),this.deleteInProgress=!1}async restoreBlock(){this.restoreInProgress=!0;const e=await(0,x.ZU)(this.value.label,this.value.id);e&&this.$emit("restore",e),this.restoreInProgress=!1}get mode(){return this.value.status}highlightValue(e){const t=()=>e.target.select();setTimeout((()=>{t()}),100)}};(0,d.gn)([(0,c.fI)()],qe.prototype,"value",void 0),qe=(0,d.gn)([(0,c.wA)({components:{Icon:B.Z}})],qe);const ze=qe,He=ze;var Ke=(0,G.Z)(He,je,Re,!1,null,null,null);const Qe=Ke.exports;let Je=class extends s.ZP{constructor(){super(...arguments),this.modalData=!1,this.globalBlocks=[],this.showTrash=!1,this.newBlockAdded=!1,this.emptyingTrash=!1,this.isLoadingData=!1,this.search="",this.broadcastChannel=null}onBlockAdded(){setTimeout((()=>this.newBlockAdded=!1),1e3)}get blankGlobalBlock(){return{label:"",id:-1,tree:!1,editInBreakdanceLink:"",status:"publish"}}async saveBlockToWordPress(e){(0,_.pipe)(await(0,We.v_)(e),(0,b.fold)((()=>{K.Z.log.message("Global block was not saved")}),(e=>{this.saveBlock(e)})))}saveBlock(e){this.globalBlocks=(0,Q.u7)(e,this.globalBlocks),this.newBlockAdded=!0}deleteBlock(e){this.globalBlocks=(0,Q.Xc)(e,this.globalBlocks)}trashBlock(e){this.globalBlocks=(0,Q.Uu)(e,this.globalBlocks,"trash")}restoreBlock(e){this.globalBlocks=(0,Q.Uu)(e,this.globalBlocks,"publish")}async emptyTrash(){this.emptyingTrash=!0,await(0,x.Dq)("breakdance_block")&&(this.globalBlocks=(0,Q.zU)(this.globalBlocks),this.showTrash=!1),this.emptyingTrash=!1}get emptyStateData(){return{itemsByStatus:this.globalBlocksByStatus.length,filteredItemsBySearch:this.filteredBlocksBySearch.length,templateName:"Global Block",showTrash:this.showTrash}}get filteredBlocksBySearch(){return this.globalBlocksByStatus.filter((e=>e.label.toLowerCase().includes(this.search.toLowerCase())))}get globalBlocksByStatus(){return this.globalBlocks.filter((e=>this.showTrash?"trash"===e.status:"publish"===e.status))}get trashLength(){return this.globalBlocks.filter((e=>"trash"===e.status)).length}beforeMount(){this.broadcastChannel=(0,_e.a)()}async mounted(){this.isLoadingData=!0,(0,_.pipe)(await(0,x.kt)(),(0,b.fold)((()=>{K.Z.log.message("Couldn't load Global Blocks data")}),(e=>{this.globalBlocks=e}))),this.isLoadingData=!1}beforeDestroy(){this.broadcastChannel&&this.broadcastChannel.close()}};(0,d.gn)([(0,c.RL)("newBlockAdded")],Je.prototype,"onBlockAdded",null),Je=(0,d.gn)([(0,c.wA)({components:{Icon:B.Z,SearchInput:ie.Z,Loading:oe.Z,BlockRow:Qe,EditGlobalBlockModal:Ve,EmptyState:he}})],Je);const Ye=Je,et=Ye;var tt=(0,G.Z)(et,Te,we,!1,null,null,null);const at=tt.exports;let st=class extends s.ZP{constructor(){super(...arguments),this.addingTemplate=!1}mounted(){(0,ge.B6)(document),se.PK.setSubscriptionMode(window.Breakdance.subscriptionMode)}get isBlockPostType(){return"breakdance_block"===this.postType||"breakdance_acf_block"===this.postType}};(0,d.gn)([(0,c.fI)()],st.prototype,"postType",void 0),st=(0,d.gn)([(0,c.wA)({components:{ManageGlobalBlocks:at,ManageTemplates:Ze,Notifications:p.Z}})],st);const nt=st,ot=nt;var it=(0,G.Z)(ot,l,r,!1,null,null,null);const lt=it.exports;var rt=a(74604);s.ZP.directive("permission",rt.Z),s.ZP.config.productionTip=!1;const dt=new URLSearchParams(window.parent.location.search).get("page");new s.ZP({store:n.ZP,vuetify:o.Z,render:e=>e(lt,{props:{postType:dt}})}).$mount("#manage-templates-wrapper")},67132:(e,t,a)=>{a.d(t,{Dq:()=>v,Qu:()=>p,UB:()=>u,ZU:()=>_,jZ:()=>g,kt:()=>h,rf:()=>m});var s=a(98851),n=a(48262),o=a(32521),i=a(9665),l=a(30902),r=a(45974),d=a(39664),c=a(65669);async function p(e){return await(0,s.D)({action:"breakdance_manage_templates_save",dataToPost:{id:e.id,title:e.title,postType:e.postType,settings:(0,c.J)(e.settings)},decoder:n.t0,resultKey:"data",friendlyName:"Save template"})}async function u(e){return await(0,s.D)({action:"breakdance_manage_templates_duplicate",dataToPost:{originalId:e.id,title:e.title,postType:e.postType,settings:(0,c.J)(e.settings)},decoder:n.t0,resultKey:"data",friendlyName:"Duplicate template"})}async function m(e){return await(0,s.D)({action:"breakdance_manage_templates_load_data",dataToPost:{post_type:e},decoder:n.YL,resultKey:"data",friendlyName:"Get templates data"})}async function h(){return await(0,s.D)({action:"breakdance_manage_global_blocks",decoder:i.G,resultKey:"data",friendlyName:"Get global blocks data"})}async function g(e,t,a){if(confirm(`${"publish"===a?"Moving to trash":"Permanently deleting"} "${e}". Are you sure?`))return(0,l.pipe)(await(0,s.D)({action:"breakdance_manage_templates_delete",dataToPost:{id:t,trashOrDelete:"trash"===a?"delete":"trash"},decoder:o.i0("success"),resultKey:"data",friendlyName:`Deleting "${e}"`}),(0,r.fold)((()=>{d.Z.log.message(`Failed to delete "${e}"`)}),(()=>t)))}async function _(e,t){if(confirm(`Restoring "${e}". Are you sure?`))return(0,l.pipe)(await(0,s.D)({action:"breakdance_manage_templates_restore",dataToPost:{id:t},decoder:o.i0("success"),resultKey:"data",friendlyName:`Restoring ${e}`}),(0,r.fold)((()=>{d.Z.log.message(`Failed to restore "${e}"`)}),(()=>t)))}async function v(e){return!!confirm("Delete all trash permanently?")&&(0,l.pipe)(await(0,s.D)({action:"breakdance_manage_templates_empty_trash",dataToPost:{postType:e},decoder:o.i0("success"),resultKey:"data",friendlyName:`Emptying trash for ${e}`}),(0,r.fold)((()=>!1),(()=>!0)))}},47187:(e,t,a)=>{a.d(t,{Uu:()=>r,Xc:()=>l,aA:()=>c,u7:()=>i,zU:()=>d});var s=a(23128),n=a(18446),o=a.n(n);function i(e,t){const a=t.findIndex((t=>t.id===e.id)),n=(0,s.Z)(t);return-1!==a?n[a]=(0,s.Z)(e):n.unshift((0,s.Z)(e)),n}function l(e,t){const a=t.findIndex((t=>"id"in t&&t.id===e)),n=(0,s.Z)(t);return-1!==a&&n.splice(a,1),n}function r(e,t,a){const n=t.findIndex((t=>"id"in t&&t.id===e)),o=(0,s.Z)(t);return-1!==n&&(o[n].status=a),o}function d(e){return(0,s.Z)(e).filter((e=>"trash"!==e.status))}function c(e,t,a){const s=e.find((e=>o()(e.settings,t)));return!s||confirm(`You already have a ${a} with the same settings called "${s.title}". Continue anyway?`)}},48262:(e,t,a)=>{a.d(t,{V4:()=>d,YL:()=>_,t0:()=>m});var s=a(99697),n=a(47902),o=a(32521),i=a(47245);const l=o.jV([o.dt({slug:o.Z_,label:o.Z_}),o.r$({defaultPriority:o.pk})]),r=(o.IX(o.dt({text:o.Z_,value:o.pk})),o.IX(o.dt({label:o.Z_,types:o.IX(l)}))),d=o.r$({parentId:o.pk,type:o.Z_,ruleGroups:o.IX(s.ZQ),triggers:s.Gc,priority:o.pk,disabled:o.O7,fallback:o.O7,onlyShowOnce:o.O7,avoidMultiple:o.O7,limitPageLoad:o.G0([o.pk,o.lB]),limitSession:o.G0([o.pk,o.lB]),limitForever:o.G0([o.pk,o.lB])}),c=o.G0([o.i0("breakdance_template"),o.i0("breakdance_popup"),o.i0("breakdance_header"),o.i0("breakdance_footer"),o.i0("breakdance_block"),o.i0("breakdance_acf_block")]),p=o.dt({id:o.pk,title:o.Z_,editInBreakdanceLink:o.Z_,postType:c,status:o.G0([o.i0("publish"),o.i0("trash"),o.S1])}),u=o.jV([p,o.dt({settings:o.G0([d,o.lB])})]),m=o.jV([p,o.dt({settings:d})]),h=o.dt({text:o.Z_,value:o.Z_,proOnly:o.G0([o.S1,o.O7])}),g=o.dt({conditions:o.IX(s.dV),dynamicFields:o.IX(n.pG),templateTypeCategories:r,popupTriggers:o.G0([o.lB,o.IX(h)])}),_=o.dt({templates:o.IX(u),templatesManagementData:g,isWooCommerceActive:o.O7,environment:i.Pt})},88667:(e,t,a)=>{a.d(t,{vZ:()=>l});var s=a(32521),n=a(32874);const o=s.dt({fileName:s.Z_,fileUrl:s.Z_,format:s.G0([s.i0("woff"),s.i0("woff2")])}),i=s.dt({id:s.Z_,files:s.IX(o),weight:s.pk,style:s.G0([s.i0("normal"),s.i0("italic")])}),l=s.dt({id:s.Z_,family:s.Z_,cssUrl:s.Z_,hasExternalCssUrl:s.O7,cssName:s.Z_,fallbackString:s.G0([s.Z_,s.S1]),faces:s.IX(i)});s.IX(s.dt({fontId:s.Z_,cssUrl:s.Z_,fontRegistrationData:n.d})),s.dt({fileUrl:s.Z_,fileName:s.Z_})},92260:(e,t,a)=>{a.d(t,{Jd:()=>i,Kn:()=>r});var s=a(32521);const n=s.dt({thumbnailUrl:s.G0([s.Z_,s.S1])}),o=s.dt({name:s.Z_,url:s.Z_,type:s.G0([s.i0("complete_site"),s.i0("sections"),s.i0("ui_kit"),s.S1]),isLocal:s.G0([s.O7,s.S1]),meta:s.G0([s.S1,n])}),i=s.dt({designProviders:s.IX(o),globalSettingsLastImportedFromUrl:s.G0([s.Z_,s.lB]),designPresetsLastImportedFromUrl:s.G0([s.Z_,s.lB]),fullSiteLastImportedFromUrl:s.G0([s.Z_,s.lB])}),l=s.dt({id:s.pk,name:s.Z_,url:s.Z_,tags:s.IX(s.Z_)}),r=(s.dt({enabled:s.O7,reliesOnGlobalSettings:s.G0([s.O7,s.S1]),reliesOnDesignPresets:s.G0([s.O7,s.S1]),name:s.Z_,requiresPassword:s.G0([s.O7,s.S1]),passwordValid:s.G0([s.O7,s.S1]),posts:s.IX(l)}),s.dt({url:s.Z_,id:s.pk}))},63842:(e,t,a)=>{a.d(t,{D:()=>_,My:()=>X,Ve:()=>$,_t:()=>A,ws:()=>B,xd:()=>L});var s=a(32521),n=a(89754),o=a(78454);const i=s.iG(s.dt({contentSections:s.IX(n.ur),designSections:s.IX(n.ur),settingsSections:s.IX(n.ur)})),l=s.dt({name:s.Z_,template:s.Z_}),r=s.dt({name:s.Z_,propertyPath:s.Z_}),d=s.dt({name:s.Z_,rawValue:s.Z_}),c=s.G0([l,r,d]),p=s.IX(c),u=s.dt({name:s.Z_,template:s.Z_}),m=s.IX(u),h=s._4,g=s.jV([s.dt({script:s.Z_}),s.r$({dependencies:s.IX(s.Z_),runForAllChildren:s.O7})]),_=(s.dt({actionData:g,elements:s.IX(s.Z_)}),s.r$({title:s.Z_,scripts:s.IX(s.Z_),inlineScripts:s.IX(s.Z_),styles:s.IX(s.Z_),inlineStyles:s.IX(s.Z_),builderCondition:s.Z_,frontendCondition:s.Z_,googleFonts:s.IX(s.Z_)})),v=s.IX(s.dt({name:s.Z_,url:s.Z_})),b=(s.dt({name:s.Z_,files:s.dt({js:v,css:v})}),s.r$({onPropertyChange:s.IX(g),onAfterDeletedElement:s.IX(g),onMovedElement:s.IX(g),onMountedElement:s.IX(g),onCreatedElement:s.IX(g),onBeforeDeletingElement:s.IX(g),onActivatedElement:s.IX(g)})),y=s.G0([s.i0("root"),s.i0("final"),s.i0("final-link"),s.i0("container"),s.i0("container-restricted"),s.i0("container-link"),s.i0("container-excluding-self"),s.i0("section"),s.i0("final-that-is-allowed-inside-root"),s.i0("popup")]),f=s.jV([s.dt({type:y}),s.r$({restrictedToBeADirectChildOf:s.IX(s.Z_),restrictedToBeADescendantOf:s.IX(s.Z_),notAllowedWhenNodeTypeIsPresentInTree:s.IX(s.Z_)})]),k=s.G0([s.i0("inside-top"),s.i0("inside-left"),s.i0("inside-right"),s.i0("inside-bottom"),s.i0("outside-top"),s.i0("outside-right"),s.i0("outside-left"),s.i0("outside-bottom")]),Z=s.G0([s.i0("padding-top"),s.i0("padding-left"),s.i0("padding-right"),s.i0("padding-bottom"),s.i0("margin-top"),s.i0("margin-right"),s.i0("margin-left"),s.i0("margin-bottom")]),T=s.G0([s.i0(!1),s.IX(s.Z_)]),w=s.dt({location:k,cssProperty:Z,affectedPropertyPath:s.Z_}),C=s.sH("ChildElement",(()=>s.jV([s.dt({slug:s.Z_}),s.r$({defaultProperties:h,children:s.IX(C)})]))),B=s.G0([s.i0("WooCommerce"),s.i0("ACF"),s.i0("MetaBox"),s.i0("ACF"),s.i0("FacetWP"),s.i0("WP Grid Builder")]),I=s.G0([s.r$({dependsOnGlobalScripts:s.O7,bypassPointerEvents:s.O7,sharePropsWithSSRChildren:s.O7,requiredPlugins:s.IX(B),disableAI:s.O7,proOnly:s.O7}),s.i0(!1)]),S=s.G0([s.i0(!1),s.r$({alwaysHide:s.O7,allowedPostTypes:s.IX(s.Z_)})]),P=s.G0([s.i0("yes"),s.i0("no"),s.i0("unknown"),s.i0("sort of")]),G=s.r$({looksGood:P,optionsGood:P,optionsWork:P,dynamicBehaviorWorks:P,notes:s.Z_}),D=s.dt({backgroundColor:s.G0([s.Z_,s.lB]),textColor:s.G0([s.Z_,s.lB]),label:s.Z_}),A=s.iG(s.dt({name:s.Z_,className:s.G0([s.Z_,s.i0(!1)]),uiIcon:s.G0([s.Z_,s.i0(!1)]),slug:s.Z_,category:s.Z_,badge:s.G0([D,s.i0(!1)]),htmlTag:s.dt({default:s.Z_,options:s.IX(s.Z_),pathToControl:s.G0([s.i0(!1),s.Z_])}),template:s.Z_,additionalClasses:s.G0([m,s.i0(!1)]),attributes:s.G0([p,s.i0(!1)]),cssTemplate:s.Z_,defaultCss:s.Z_,defaultProperties:s.G0([h,s.i0(!1)]),defaultChildren:s.G0([s.IX(C),s.i0(!1)]),controls:i,dependencies:s.G0([s.IX(_),s.i0(!1)]),actions:s.G0([b,s.i0(!1)]),nestingRule:f,spacingBars:s.G0([s.i0(!1),s.IX(w)]),dynamicPropertyPaths:s.G0([s.i0(!1),s.IX(o.G)]),settings:I,addPanelRules:S,experimental:s.O7,order:s.pk,projectManagement:s.G0([s.i0(!1),G]),propertyPathsToWhitelistInFlatProps:T,propertyPathsToSsrElementWhenValueChanges:T})),x=(s.IX(A),s.dt({slug:s.Z_,label:s.Z_})),$=s.IX(x),L=s.r$({attributes:s.IX(c),dependencies:s.IX(_),actions:b}),X=s.IX(s.dt({macro:s.Z_,slug:s.Z_}))},9665:(e,t,a)=>{a.d(t,{G:()=>i,H:()=>o});var s=a(32521),n=a(75031);const o=s.jV([s.dt({label:s.Z_,id:s.pk,tree:n.Oh,editInBreakdanceLink:s.Z_}),s.r$({status:s.G0([s.i0("publish"),s.i0("trash")])})]),i=s.IX(o)},47245:(e,t,a)=>{a.d(t,{Pt:()=>I});var s=a(32521),n=a(47902),o=a(63842),i=a(75031),l=a(32874),r=a(9294),d=a(94328),c=a(23777),p=a(21516),u=a(83714),m=a(38537),h=a(99697),g=a(3749),_=a(14018),v=a(97313),b=a(14010),y=a(665),f=a(92260),k=a(85256);const Z=s.G0([s.i0("post_does_not_exist"),s.i0("post_type_is_banned"),s.i0("post_type_is_restricted"),s.i0("post_is_in_trash")]),T=s.dt({errorType:Z,postType:s.G0([s.S1,s.Z_]),backToAdminUrl:s.Z_}),w=["free","pro"],C=(0,k.$)(w),B=s.dt({enabled:s.O7}),I=s.G0([s.i0("local"),s.i0("production")]),S=s.dt({environment:I,elementPresets:_.p,neededData:u.i,builderElements:s.IX(o._t),elementsExternalAttrsDepsAndActions:o.xd,builderElementCategories:o.Ve,preferences:g.p,dynamicFields:n.UN,conditions:h.bn,fonts:l.s,globalSettingsControlsAndTemplate:r.D,globalSettings:i.az,plugins:d.m,availableDocuments:m.gu,selectors:p.Ho,availableMediaSizes:s.IX(y.wP),availablePermissions:s.IX(b.E),availableWordpressPlugins:s.IX(o.ws),permission:b.E,builtinBreakpoints:s.IX(v.g),twigMacros:o.My,twigMacrosHash:s.Z_,designLibrary:f.Jd,subscriptionMode:C,experiments:s.IX(s.Z_),ai:B}),P=s.jV([s.dt({document:m.fA,documentSpecificNeededUrls:u.s,templatePreview:c.jz}),S]);s.G0([T,P])},21516:(e,t,a)=>{a.d(t,{Ho:()=>d});var s=a(75031),n=a(32521),o=a(89754);const i=n.Z_,l=n.dt({name:i,type:n.G0([n.i0("class"),n.i0("custom")]),properties:s.az}),r=n.IX(l),d=n.iG(n.dt({template:n.Z_,controls:n.IX(o.ur),selectors:r}))},23777:(e,t,a)=>{a.d(t,{jz:()=>l});var s=a(32521);const n=s.dt({field:s.Z_,index:s.pk}),o=s.dt({label:s.Z_,url:s.Z_,type:s.Z_,repeater:s.G0([n,s.lB,s.S1])}),i=s.IX(o),l=s.dt({previewableItems:s.G0([i,s.i0(!1)]),lastPreviewedItem:s.G0([o,s.i0(!1)])})},65118:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(45974),n=a(88506),o=a(30902),i=a(16442);function l(e,t){return(0,o.pipe)(e,n.Z,(0,s.map)((0,o.flow)(t.decode,(0,s.mapLeft)(i.H))),s.flatten)}}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,(()=>{var e=[];a.O=(t,s,n,o)=>{if(!s){var i=1/0;for(c=0;c<e.length;c++){for(var[s,n,o]=e[c],l=!0,r=0;r<s.length;r++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](s[r])))?s.splice(r--,1):(l=!1,o<i&&(i=o));if(l){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,n,o]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{a.j=93})(),(()=>{var e={93:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,o,[i,l,r]=s,d=0;if(i.some((t=>0!==e[t]))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(r)var c=r(a)}for(t&&t(s);d<i.length;d++)o=i[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=globalThis["webpackChunkbuilder"]=globalThis["webpackChunkbuilder"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[998,64],(()=>a(92788)));s=a.O(s)})();
//# sourceMappingURL=manage-templates.71bb8009.js.map